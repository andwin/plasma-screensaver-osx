<html>
  <body>
    <canvas id="myCanvas" width="1024" height="768" style="border:1px solid #000000;"></canvas>

    <script>
      var c = document.getElementById('myCanvas');
      var ctx = c.getContext('2d');

      var screenWidth = 1024;
      var screenHeight = 768;

      var virtualScreenWidth = 320;
      var virtualScreenHeight = 240;

      var virtualPixelWidth = screenWidth / virtualScreenWidth;
      var virtualPixelHeight = screenHeight / virtualScreenHeight;

      var time = 0;

      var drawPixel = function(x, y, red, green, blue) {
        red = Math.floor(red * 256.0);
        green = Math.floor(green * 256.0);
        blue = Math.floor(blue * 256.0);

        ctx.fillStyle = 'rgb(' + red + ',' + green + ',' + blue + ')';
        var screenX = Math.ceil(x * virtualPixelWidth);
        var screenY = Math.ceil(y * virtualPixelHeight);
        ctx.fillRect(screenX, screenY, Math.ceil(virtualPixelWidth), Math.ceil(virtualPixelHeight));
      }

      var animateOneFrame = function() {
        for(var x = 0; x < virtualScreenWidth; x++) {
          for(var y = 0; y < virtualScreenHeight; y++) {

            var v1 = Math.sin(x / (virtualPixelWidth * 7) + time) / 2;
            var v2 = Math.sin((x * Math.sin(time / 5) / (virtualPixelWidth * 5) + y * Math.cos(time / 7) / (virtualPixelHeight * 7)) + time + 100) / 2;

            var cx = x - Math.sin(time / 9) * virtualScreenWidth / 2 * 0.8 - virtualScreenWidth / 2;
            var cy = y - Math.sin(time / 6) * virtualScreenHeight / 2 * 0.8 - virtualScreenHeight / 2;
            var v3 = Math.sin(Math.sqrt((cx * cx + cy * cy) / virtualPixelWidth / 180) + time / 2) / 2.3;

            var v = (v1 + v2 + v3) / 3;

            var red = Math.sin(v * Math.PI);
            var green = Math.cos(v * Math.PI);
            var blue = 0;

            drawPixel(x, y, red, green, blue);
          }
        }

        time ++;
      }

      window.setInterval(animateOneFrame, 50);
    </script>
  </body>
</html>
