<html>
  <body>
    <canvas id="myCanvas" width="1024" height="768" style="border:1px solid #000000;"></canvas>

    <script>
      var c = document.getElementById('myCanvas');
      var ctx = c.getContext('2d');

      var screenWidth = 1024;
      var screenHeight = 768;

      var virtualScreenWidth = 320;
      var virtualScreenHeight = 240;

      var virtualPixelWidth = screenWidth / virtualScreenWidth;
      var virtualPixelHeight = screenHeight / virtualScreenHeight;

      var drawPixel = function(x, y, red, green, blue) {
        red = Math.floor(red * 256.0);
        green = Math.floor(green * 256.0);
        blue = Math.floor(blue * 256.0);

        ctx.fillStyle = 'rgb(' + red + ',' + green + ',' + blue + ')';
        ctx.fillRect(x * virtualPixelWidth, y * virtualPixelHeight, virtualPixelWidth, virtualPixelHeight);
      }

      var animateOneFrame = function() {
        for(var x = 0; x < virtualScreenWidth; x++) {
          for(var y = 0; y < virtualScreenHeight; y++) {

            var v = Math.sin(x / (virtualPixelWidth * 2) + 1) / 2;
            var red = Math.sin(v * Math.PI);
            var green = Math.cos(v * Math.PI);
            var blue = 0;

            drawPixel(x, y, red, green, blue);
          }
        }
      }

      animateOneFrame();
    </script>
  </body>
</html>
